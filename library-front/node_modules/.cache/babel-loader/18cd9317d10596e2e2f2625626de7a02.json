{"ast":null,"code":"import _objectSpread from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/intern/Desktop/workspace/library-front/src/contexts/context_aut.js\";\nimport React from 'react';\nimport Authen from '../authen_helper';\nimport Req from '../helper_request';\nexport var AContext = React.createContext();\nexport var AuthorProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AuthorProvider, _React$Component);\n\n  function AuthorProvider() {\n    var _this;\n\n    _classCallCheck(this, AuthorProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AuthorProvider).call(this));\n    _this.state = {\n      isAuthor: false,\n      Authors: [],\n      curAuthor: null,\n      author: null\n    };\n\n    _this.getAuthor =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(authorId) {\n        var result, author;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return fetch(\"/autors/\".concat(authorId));\n\n              case 3:\n                result = _context.sent;\n                _context.next = 6;\n                return result.json();\n\n              case 6:\n                author = _context.sent;\n\n                _this.setState({\n                  author: author\n                });\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(\"ERROR: \".concat(_context.t0.message));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.AuthorSign =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(data) {\n        var result, resJson;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return Req.post('/authors', data, 'author');\n\n              case 3:\n                result = _context2.sent;\n                _context2.next = 6;\n                return result.json();\n\n              case 6:\n                resJson = _context2.sent;\n\n                if (!result.ok) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                Authen.authenticateToken(resJson.token);\n\n                _this.setState({\n                  isAuth: Authen.isAuthenticated()\n                });\n\n                return _context2.abrupt(\"return\", true);\n\n              case 13:\n                return _context2.abrupt(\"return\", false);\n\n              case 14:\n                _context2.next = 19;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(\"ERROR: \".concat(_context2.t0.message));\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 16]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.addAuthor =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(data) {\n        var result, resJson;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return Req.post('/login', data);\n\n              case 3:\n                result = _context3.sent;\n                _context3.next = 6;\n                return result.json();\n\n              case 6:\n                resJson = _context3.sent;\n\n                if (!result.ok) {\n                  _context3.next = 13;\n                  break;\n                }\n\n                Authen.authenticateToken(resJson.token);\n\n                _this.setState({\n                  isAuth: Authen.isAuthenticated()\n                });\n\n                return _context3.abrupt(\"return\", true);\n\n              case 13:\n                return _context3.abrupt(\"return\", false);\n\n              case 14:\n                _context3.next = 19;\n                break;\n\n              case 16:\n                _context3.prev = 16;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(\"ERROR: \".concat(_context3.t0.message));\n\n              case 19:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 16]]);\n      }));\n\n      return function (_x3) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.authenticated = function () {\n      return Authen.isAuthenticated();\n    };\n\n    _this.getAuthors =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4() {\n      var result, authors;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return Req.get('/autors');\n\n            case 3:\n              result = _context4.sent;\n              _context4.next = 6;\n              return result.json();\n\n            case 6:\n              authors = _context4.sent;\n\n              _this.setState({\n                Authors: authors\n              });\n\n              _context4.next = 13;\n              break;\n\n            case 10:\n              _context4.prev = 10;\n              _context4.t0 = _context4[\"catch\"](0);\n              console.log(\"ERROR: \".concat(_context4.t0.message));\n\n            case 13:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, this, [[0, 10]]);\n    }));\n\n    _this.testPassword = function (password, password_confirmation) {\n      if (password.length < 8) {\n        return \"Wrong numbers of Password\";\n      } else if (password !== password_confirmation) {\n        return \"Please try again\";\n      }\n\n      return null;\n    };\n\n    _this.getAuthor = _this.getAuthor.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addAuthor = _this.addAuthor.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.AuthorSign = _this.AutorSign.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.authenticated = _this.authenticated.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getAuthors = _this.getAuthors.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.testPassword = _this.testPassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AuthorProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(AContext.Provider, {\n        value: _objectSpread({}, this.state, {\n          authenticated: this.authenticated,\n          AuthorSignin: this.AuthorDignin,\n          addAuthor: this.addAuthor,\n          getAuthor: this.getAuthor,\n          getAuthors: this.getAuthors,\n          testPassword: this.testPassword\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return AuthorProvider;\n}(React.Component);","map":{"version":3,"sources":["/home/intern/Desktop/workspace/library-front/src/contexts/context_aut.js"],"names":["React","Authen","Req","AContext","createContext","AuthorProvider","state","isAuthor","Authors","curAuthor","author","getAuthor","authorId","fetch","result","json","setState","console","log","message","AuthorSign","data","post","resJson","ok","authenticateToken","token","isAuth","isAuthenticated","addAuthor","authenticated","getAuthors","get","authors","testPassword","password","password_confirmation","length","bind","AutorSign","AuthorSignin","AuthorDignin","props","children","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Authen from '../authen_helper';\nimport Req from '../helper_request';\n\nexport const AContext = React.createContext();\n\nexport class AuthorProvider extends React.Component {\n  constructor() {\n    super();\n    this.getAuthor = this.getAuthor.bind(this);\n    this.addAuthor = this.addAuthor.bind(this);\n    this.AuthorSign = this.AutorSign.bind(this);\n    this.authenticated = this.authenticated.bind(this);\n    this.getAuthors = this.getAuthors.bind(this);\n    this.testPassword = this.testPassword.bind(this);\n  }\n\n  state = {\n    isAuthor: false,\n    Authors: [],\n    curAuthor: null,\n    author: null\n  }\n  getAuthor = async (authorId) => {\n    try {\n      const result = await fetch(`/autors/${authorId}`);\n      const author = await result.json();\n      this.setState({ author });\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n\n\n  AuthorSign = async (data) => {\n    try {\n      const result = await Req.post('/authors', data, 'author')\n      const resJson = await result.json();\n      if (result.ok) {\n        Authen.authenticateToken(resJson.token);\n        this.setState({ isAuth: Authen.isAuthenticated() });\n        return true;\n      } else {\n        return false;\n      }\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n\n  addAuthor = async (data) => {\n    try {\n      const result = await Req.post('/login', data);\n      const resJson = await result.json();\n      if (result.ok) {\n        Authen.authenticateToken(resJson.token);\n        this.setState({ isAuth: Authen.isAuthenticated() });\n        return true;\n      } else {\n        return false;\n      }\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n  authenticated = () => Authen.isAuthenticated();\n  \n\n  getAuthors = async () => {\n    try {\n      const result = await Req.get('/autors');\n      const authors = await result.json();\n      this.setState({ Authors: authors });\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n\n  testPassword = (password, password_confirmation) => {\n    if (password.length < 8) {\n      return \"Wrong numbers of Password\"\n    } else if (password !== password_confirmation) {\n      return \"Please try again\"\n    }\n\n    return null;\n  }\n\n  render() {\n    return (\n      <AContext.Provider value={\n        {\n          ...this.state,\n          authenticated: this.authenticated,\n          AuthorSignin: this.AuthorDignin,\n          addAuthor: this.addAuthor,\n         \n          getAuthor: this.getAuthor,\n          getAuthors: this.getAuthors,\n          testPassword: this.testPassword\n        }\n      }>\n        {this.props.children}\n      </AContext.Provider>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}