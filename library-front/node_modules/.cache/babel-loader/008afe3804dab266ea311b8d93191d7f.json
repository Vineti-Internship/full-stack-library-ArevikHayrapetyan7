{"ast":null,"code":"import _objectSpread from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/intern/Desktop/workspace/library-front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/intern/Desktop/workspace/library-front/src/contexts/context_book.js\";\nimport React from 'react';\nimport Req from '../helper_request';\nexport var BContext = React.createContext();\nexport var BookProvider =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(BookProvider, _React$Component);\n\n  function BookProvider() {\n    var _this;\n\n    _classCallCheck(this, BookProvider);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BookProvider).call(this));\n    _this.state = {\n      autorsBooks: [],\n      Books: [],\n      book: null\n    };\n\n    _this.getBook =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id) {\n        var result, book;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return Req.get(\"/books/\".concat(id));\n\n              case 3:\n                result = _context.sent;\n                _context.next = 6;\n                return result.json();\n\n              case 6:\n                book = _context.sent;\n\n                _this.setState({\n                  book: book\n                });\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(\"ERROR: \".concat(_context.t0.message));\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.addBook =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(book) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return Req.post('/books', book, 'book');\n\n              case 3:\n                _context2.next = 5;\n                return _this.getAllBooks();\n\n              case 5:\n                _context2.next = 10;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(\"ERROR: \".concat(_context2.t0.message));\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 7]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.deleteBook =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e, book) {\n        var confirmation;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n                confirmation = window.confirm(\"Do you want to remove \".concat(book.title, \" book?\"));\n\n                if (!confirmation) {\n                  _context3.next = 16;\n                  break;\n                }\n\n                _context3.prev = 3;\n                _context3.next = 6;\n                return Req.delete(\"/books/\".concat(book.id));\n\n              case 6:\n                _context3.next = 8;\n                return _this.getAllBooks();\n\n              case 8:\n                window.alert(\"book is  deleted\");\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.prev = 11;\n                _context3.t0 = _context3[\"catch\"](3);\n                console.log(\"ERROR: \".concat(_context3.t0.message));\n\n              case 14:\n                _context3.next = 17;\n                break;\n\n              case 16:\n                window.alert(\"it has been closed!\");\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[3, 11]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    _this.changeBook =\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(book) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return Req.update(\"/books/\".concat(book.id), book, 'book');\n\n              case 3:\n                _context4.next = 8;\n                break;\n\n              case 5:\n                _context4.prev = 5;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(\"ERROR: \".concat(_context4.t0.message));\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 5]]);\n      }));\n\n      return function (_x5) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n\n    _this.getCreatedBooks =\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(autorId) {\n        var result, _ref6, books;\n\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return Req.get(\"/autors/\".concat(autorId));\n\n              case 3:\n                result = _context5.sent;\n                _context5.next = 6;\n                return result.json();\n\n              case 6:\n                _ref6 = _context5.sent;\n                books = _ref6.books;\n\n                _this.setState({\n                  autorsBooks: books\n                });\n\n                _context5.next = 14;\n                break;\n\n              case 11:\n                _context5.prev = 11;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.log(\"ERROR: \".concat(_context5.t0.message));\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 11]]);\n      }));\n\n      return function (_x6) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n\n    _this.getBooks =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee6() {\n      var result, books;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              _context6.prev = 0;\n              _context6.next = 3;\n              return Req.get('/books');\n\n            case 3:\n              result = _context6.sent;\n              _context6.next = 6;\n              return result.json();\n\n            case 6:\n              books = _context6.sent;\n\n              _this.setState({\n                Books: books\n              });\n\n              _context6.next = 13;\n              break;\n\n            case 10:\n              _context6.prev = 10;\n              _context6.t0 = _context6[\"catch\"](0);\n              console.log(\"ERROR: \".concat(_context6.t0.message));\n\n            case 13:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, this, [[0, 10]]);\n    }));\n    _this.getBook = _this.getBook.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addBook = _this.addBook.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteBook = _this.deleteBook.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.changeBook = _this.changeBook.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getCreatedBooks = _this.getCreatedBooks.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getBooks = _this.getBooks.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(BookProvider, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(BContext.Provider, {\n        value: _objectSpread({}, this.state, {\n          addBook: this.addBook,\n          getBook: this.getBook,\n          changeBook: this.changeBook,\n          deleteeBook: this.deleteBook,\n          getBooks: this.getBooks,\n          getCreatedBooks: this.getCreatedBooks\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return BookProvider;\n}(React.Component);\n;","map":{"version":3,"sources":["/home/intern/Desktop/workspace/library-front/src/contexts/context_book.js"],"names":["React","Req","BContext","createContext","BookProvider","state","autorsBooks","Books","book","getBook","id","get","result","json","setState","console","log","message","addBook","post","getAllBooks","deleteBook","e","preventDefault","confirmation","window","confirm","title","delete","alert","changeBook","update","getCreatedBooks","autorId","books","getBooks","bind","deleteeBook","props","children","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Req from '../helper_request';\n\nexport const BContext = React.createContext();\n\nexport class BookProvider extends React.Component {\n  constructor() {\n    super();\n  \n    this.getBook = this.getBook.bind(this);\n    this.addBook = this.addBook.bind(this);\n    this.deleteBook = this.deleteBook.bind(this);\n    this.changeBook = this.changeBook.bind(this);\n    this.getCreatedBooks = this.getCreatedBooks.bind(this);\n    this.getBooks = this.getBooks.bind(this);\n   \n  }\n\n  state = {\n    autorsBooks: [],\n    Books: [],\n    book: null\n  };\n\n  getBook = async (id) => {\n    try {\n      const result = await Req.get(`/books/${id}`);\n      const book = await result.json();\n      this.setState({ book });\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n\n  addBook = async (book) => {\n    try {\n      await Req.post('/books', book, 'book');\n      await this.getAllBooks();\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n\n  deleteBook = async (e, book) => {\n    e.preventDefault();\n\n    const confirmation = window.confirm(`Do you want to remove ${book.title} book?`);\n    if (confirmation) {\n      try {\n        await Req.delete(`/books/${book.id}`)\n        await this.getAllBooks();\n        window.alert(\"book is  deleted\");\n      } catch (error) {\n        console.log(`ERROR: ${error.message}`);\n      }\n    } else {\n      window.alert(\"it has been closed!\");\n    }\n  }\n\nchangeBook = async (book) => {\n    try {\n      await Req.update(`/books/${book.id}`, book, 'book');\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n\n  getCreatedBooks = async (autorId) => {\n    try {\n      const result = await Req.get(`/autors/${autorId}`);\n      const { books } = await result.json();\n      this.setState({\n        autorsBooks: books\n      });\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`);\n    }\n  }\n\n  getBooks = async () => {\n    try {\n      const result = await Req.get('/books');\n      const books = await result.json();\n      this.setState({\n        Books: books\n      });\n    } catch (error) {\n      console.log(`ERROR: ${error.message}`)\n    }\n  }\n\n  render() {\n    return (\n      <BContext.Provider value={\n        {\n          ...this.state,\n          addBook: this.addBook,\n          getBook: this.getBook,\n          changeBook: this.changeBook,\n          deleteeBook: this.deleteBook,\n          getBooks: this.getBooks,\n          getCreatedBooks: this.getCreatedBooks\n        }}>\n        {this.props.children}\n      </BContext.Provider>\n    )\n  }\n};"]},"metadata":{},"sourceType":"module"}